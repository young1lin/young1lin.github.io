/* -------------------- Header Logo 对齐和滚动效果 -------------------*/
.header {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    background: var(--theme) !important;
    border-bottom: 1px solid var(--border) !important;
    transition: all 0.3s ease !important;
    height: 80px !important;
}

.nav {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 0 !important;
    max-width: none !important;
    height: 100% !important;
}

/* Logo 容器 - 与 ToC 完全对齐，高度与 header 一致 */
.logo {
    top: 0 !important;
    /* 改为0，与header顶部对齐 */
    z-index: 1001 !important;
    transition: all 0.3s ease !important;
    background: transparent !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    height: 80px !important;
    /* 与header高度一致 */
    width: auto !important;
}

/* Logo 文本样式 */
.logo>a {
    font-weight: bold !important;
    font-size: 18px !important;
    color: var(--primary) !important;
    text-decoration: none !important;
    background: var(--theme) !important;
    transition: all 0.3s ease !important;
}

/* Logo switches - 滚动时保持语言切换显示 */
.logo-switches {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    transition: all 0.3s ease !important;
    opacity: 1 !important;
    transform: translateX(0) !important;
}

/* 主题切换按钮样式 */
.logo-switches button {
    background: var(--theme) !important;
    padding: 6px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
}

.logo-switches button:hover {
    background: var(--hover) !important;
}

/* 语言切换样式 */
.lang-switch {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

.lang-switch li {
    margin: 0 !important;
}

.lang-switch a {
    color: var(--secondary) !important;
    text-decoration: none !important;
    padding: 4px 8px !important;
    border-radius: 4px !important;
    transition: all 0.2s ease !important;
}

.lang-switch a:hover {
    color: var(--primary) !important;
    background: var(--hover) !important;
}

/* 右侧菜单 */
#menu {
    position: fixed !important;
    right: 50px !important;
    top: 20px !important;
    display: flex !important;
    gap: 20px !important;
    transition: all 0.3s ease !important;
    opacity: 1 !important;
    transform: translateY(0) !important;
}

/* 滚动时隐藏右侧菜单，但保持语言切换器显示 */
.header.scrolled #menu {
    opacity: 0 !important;
    transform: translateY(-20px) !important;
    pointer-events: none !important;
}

/* 移除原来隐藏语言切换器的规则，改为在滚动时保持显示且添加背景 */
.header.scrolled .lang-switch {
    opacity: 1 !important;
    transform: translateX(0) !important;
    pointer-events: auto !important;
}

/* 滚动时为语言切换器添加背景，与 logo 保持一致 */
.header.scrolled .lang-switch a {
    background: rgba(var(--theme-rgb), 0.95) !important;
    backdrop-filter: blur(10px) !important;
}

/* 滚动时 logo 样式调整 */
.header.scrolled .logo>a {
    background: rgba(var(--theme-rgb), 0.95) !important;
    backdrop-filter: blur(10px) !important;
    /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important; */
    /* border: 1px solid var(--border) !important; */
}

/* 滚动时主题按钮也添加背景 */
.header.scrolled .logo-switches button {
    background: rgba(var(--theme-rgb), 0.95) !important;
    backdrop-filter: blur(10px) !important;
    /* box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important; */
}

/* 确保 main 内容不被 header 遮挡 - 增加更多间距 */
.main {
    margin-top: 120px !important;
    /* 增加到120px，确保标题不被遮挡 */
    margin-left: 300px !important;
    margin-right: 50px !important;
    transition: margin 0.3s ease !important;
}

/* ToC 样式确保与 logo 对齐 */
.toc {
    position: fixed !important;
    left: 20px !important;
    top: 100px !important;
    /* 在header下方 */
    width: 250px !important;
    max-height: calc(100vh - 120px) !important;
    overflow-y: auto !important;
    background: var(--theme) !important;
    border: 1px solid var(--border) !important;
    border-radius: 8px !important;
    padding: 15px !important;
    margin: 0 !important;
    z-index: 999 !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
    transition: all 0.3s ease !important;
}

/* -------------------- 响应式调整 -------------------*/
@media (max-width: 1400px) {

    .logo,
    .toc {
        left: 15px !important;
    }

    .main {
        margin-left: 260px !important;
    }
}

@media (max-width: 1200px) {

    .logo,
    .toc {
        left: 20px !important;
    }

    .toc {
        display: none !important;
    }

    #menu {
        right: 30px !important;
    }

    .main {
        margin-left: 50px !important;
        margin-right: 50px !important;
    }
}

@media (max-width: 768px) {
    .logo {
        left: 15px !important;
    }

    /* .logo-switches {
        gap: 5px !important;
    } */

    #menu {
        right: 15px !important;
        top: 15px !important;
        gap: 15px !important;
    }

    .main {
        margin-left: 20px !important;
        margin-right: 20px !important;
        margin-top: 100px !important;
    }
}

/* -------------------- 深色模式优化 -------------------*/
[data-theme="dark"] .header.scrolled .logo>a,
[data-theme="dark"] .header.scrolled .logo-switches button,
[data-theme="dark"] .header.scrolled .lang-switch a {
    background: rgba(var(--theme-rgb), 0.95) !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3) !important;
}

/* -------------------- 隐藏原有的 header 背景 -------------------*/
.header.scrolled {
    background: transparent !important;
    border-bottom: none !important;
    backdrop-filter: none !important;
}